<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 610 110" width="600" height="100" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs>
    <style>
      .title {
        font-size: 1.5em;
        text-overflow: ellipsis;
        overflow: hidden;
        white-space: nowrap;
      }
      .description {
        font-size: 0.75em;
        text-overflow: ellipsis;
        overflow: hidden;
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
      }
      .text {
        text-align: start;
        padding: 10px;
        height: calc(100% - 20px);
        margin-left: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
        color: black;
      }
           .date {
        font-size: 0.5em;
        opacity: 0.5;
        text-align: end;
        position: absolute;
        bottom: 0;
        right: 10px;
        color: black;
      }
      
      .main {
        fill: white;
      }
      .data {
        opacity: 0.75;
        text-align: start;
        position: absolute;
        bottom: 0;
        padding-bottom: 5px;
        left: 10px;
        color: black;
        max-width: 400px;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
      }
      .author {
        opacity: 0.75;
        font-size: 0.5em;
      }
      .category {
        background-color: rgba(0, 0, 0, 0.25);
        border-radius: 0.25em;
        padding: 0.125em 0.25em;
        font-size: 0.75em;
        color: rgba(0, 0, 0, 0.8);
      }
    </style>
  </defs>
  <g class="main">
    <rect class="content" width="600" height="100" stroke="rgba(0, 0, 0, 0.5)" x="5" y="5" rx="10" />
    <foreignObject width="600" height="100" x="5" y="5">
      <div xmlns="http://www.w3.org/1999/xhtml" style="border-radius: 5px; overflow: hidden; height: 100%;">
        <div class="text">
          <div class="title">Day&#0032;&#0045;&#0032;9&#0032;Pulumi&#0032;Testing&#0046;</div>
          <div class="description">Day&#0032;9&#0032;&#0045;&#0032;Pulumi&#0032;Testing&#0010;What&#0032;does&#0032;testing&#0032;in&#0032;pulumi&#0032;look&#0032;like&#0046;&#0010;Since&#0032;we&#0032;are&#0032;using&#0032;general&#0045;purpose&#0032;programming&#0032;languages&#0044;&#0032;we&#0032;can&#0032;use&#0032;native&#0032;testing&#0032;frameworks&#0032;in&#0032;our&#0032;language&#0032;of&#0032;choice&#0044;&#0032;i&#0046;e&#0046;&#0044;&#0032;NUnit&#0032;for&#0032;&#0046;NET&#0032;or&#0032;Jest&#0032;for&#0032;the&#0032;JS&#0032;ecosystem&#0046;&#0010;We&#0032;are&#0032;also&#0032;able&#0032;to&#0032;take&#0032;advantage&#0032;of&#0032;multiple&#0032;styles&#0032;of&#0032;automated&#0032;testing&#0046;&#0010;Unit&#0032;tests&#0058;&#0032;testing&#0032;of&#0032;individual&#0032;parts&#0032;of&#0032;our&#0032;code&#0046;&#0010;Property&#0032;tests&#0058;&#0032;run&#0032;resource&#0045;level&#0032;assertions&#0032;while&#0032;infrastructure&#0032;is&#0032;being&#0032;deployed&#0046;&#0010;Integration&#0032;Tests&#0058;&#0032;deploy&#0032;ephemeral&#0032;infrastructure&#0032;and&#0032;run&#0032;external&#0032;tests&#0032;against&#0032;it&#0046;&#0010;In&#0032;this&#0032;blog&#0044;&#0032;we&#0032;will&#0032;mainly&#0032;be&#0032;looking&#0032;at&#0032;Unit&#0032;tests&#0032;&#0032;and&#0032;Integration&#0032;tests&#0044;&#0032;Property&#0032;tests&#0032;are&#0032;not&#0032;supported&#0032;in&#0032;all&#0032;languages&#0046;&#0010;How&#0032;can&#0032;we&#0032;use&#0032;testing&#0032;to&#0032;our&#0032;advantage&#0063;&#0010;Unit&#0032;Testing&#0046;&#0010;Using&#0032;Unit&#0032;testing&#0044;&#0032;we&#0032;can&#0032;enforce&#0032;specific&#0032;resources&#0032;to&#0032;make&#0032;sure&#0032;that&#0032;we&#0032;have&#0032;consistent&#0010;tagging&#0044;&#0032;exposed&#0032;ports&#0044;&#0032;and&#0032;so&#0032;on&#0046;&#0032;&#0010;Unit&#0032;testing&#0032;with&#0032;Go&#0046;&#0010;package&#0032;main&#0010;&#0010;import&#0032;&#0040;&#0010;&#0032;&#0032;&#0032;&#0032;&#0034;sync&#0034;&#0010;&#0032;&#0032;&#0032;&#0032;&#0034;testing&#0034;&#0010;&#0010;&#0032;&#0032;&#0032;&#0032;&#0034;github&#0046;com&#0047;pulumi&#0047;pulumi&#0045;aws&#0047;sdk&#0047;go&#0047;aws&#0047;ec2&#0034;&#0010;&#0032;&#0032;&#0032;&#0032;&#0034;github&#0046;com&#0047;pulumi&#0047;pulumi&#0047;sdk&#0047;go&#0047;common&#0047;resource&#0034;&#0010;&#0032;&#0032;&#0032;&#0032;&#0034;github&#0046;com&#0047;pulumi&#0047;pulumi&#0047;sdk&#0047;go&#0047;pulumi&#0034;&#0010;&#0032;&#0032;&#0032;&#0032;&#0034;github&#0046;com&#0047;stretchr&#0047;testify&#0047;assert&#0034;&#0010;&#0041;&#0010;&#0010;type&#0032;mocks&#0032;int&#0010;&#0010;&#0047;&#0047;&#0032;Create&#0032;the&#0032;mock&#0046;&#0010;func&#0032;&#0040;mocks&#0041;&#0032;NewResource&#0040;typeToken&#0044;&#0032;name&#0032;string&#0044;&#0032;inputs&#0032;resource&#0046;PropertyMap&#0044;&#0032;provider&#0044;&#0032;id&#0032;string&#0041;&#0032;&#0040;string&#0044;&#0032;resource&#0046;PropertyMap&#0044;&#0032;error&#0041;&#0032;&#0123;&#0010;&#0032;&#0032;&#0032;&#0032;return&#0032;name&#0032;&#0043;&#0032;&#0034;&#0095;id&#0034;&#0044;&#0032;inputs&#0044;&#0032;nil&#0010;&#0125;&#0010;&#0010;func&#0032;&#0040;mocks&#0041;&#0032;Call&#0040;token&#0032;string&#0044;&#0032;args&#0032;resource&#0046;PropertyMap&#0044;&#0032;provider&#0032;string&#0041;&#0032;&#0040;resource&#0046;PropertyMap&#0044;&#0032;error&#0041;&#0032;&#0123;&#0010;&#0032;&#0032;&#0032;&#0032;return&#0032;args&#0044;&#0032;nil&#0010;&#0125;&#0010;&#0010;&#0047;&#0047;&#0032;Applying&#0032;unit&#0032;tests&#0046;&#0010;func&#0032;TestInfrastructure&#0040;t&#0032;&#0042;testing&#0046;T&#0041;&#0032;&#0123;&#0010;&#0032;&#0032;&#0032;&#0032;err&#0032;&#0058;&#0061;&#0032;pulumi&#0046;RunErr&#0040;func&#0040;ctx&#0032;&#0042;pulumi&#0046;Context&#0041;&#0032;error&#0032;&#0123;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;infra&#0044;&#0032;err&#0032;&#0058;&#0061;&#0032;createInfrastructure&#0040;ctx&#0041;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;assert&#0046;NoError&#0040;t&#0044;&#0032;err&#0041;&#0010;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;var&#0032;wg&#0032;sync&#0046;WaitGroup&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;wg&#0046;Add&#0040;3&#0041;&#0010;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0047;&#0047;&#0032;Test&#0032;if&#0032;the&#0032;service&#0032;has&#0032;tags&#0032;and&#0032;a&#0032;name&#0032;tag&#0046;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;pulumi&#0046;All&#0040;infra&#0046;server&#0046;URN&#0040;&#0041;&#0044;&#0032;infra&#0046;server&#0046;Tags&#0041;&#0046;ApplyT&#0040;func&#0040;all&#0032;&#0091;&#0093;interface&#0123;&#0125;&#0041;&#0032;error&#0032;&#0123;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;urn&#0032;&#0058;&#0061;&#0032;all&#0091;0&#0093;&#0046;&#0040;pulumi&#0046;URN&#0041;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;tags&#0032;&#0058;&#0061;&#0032;all&#0091;1&#0093;&#0046;&#0040;map&#0091;string&#0093;interface&#0123;&#0125;&#0041;&#0010;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;assert&#0046;Containsf&#0040;t&#0044;&#0032;tags&#0044;&#0032;&#0034;Name&#0034;&#0044;&#0032;&#0034;missing&#0032;a&#0032;Name&#0032;tag&#0032;on&#0032;server&#0032;&#0037;v&#0034;&#0044;&#0032;urn&#0041;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;wg&#0046;Done&#0040;&#0041;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;return&#0032;nil&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0125;&#0041;&#0010;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0047;&#0047;&#0032;Test&#0032;if&#0032;the&#0032;instance&#0032;is&#0032;configured&#0032;with&#0032;user&#0095;data&#0046;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;pulumi&#0046;All&#0040;infra&#0046;server&#0046;URN&#0040;&#0041;&#0044;&#0032;infra&#0046;server&#0046;UserData&#0041;&#0046;ApplyT&#0040;func&#0040;all&#0032;&#0091;&#0093;interface&#0123;&#0125;&#0041;&#0032;error&#0032;&#0123;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;urn&#0032;&#0058;&#0061;&#0032;all&#0091;0&#0093;&#0046;&#0040;pulumi&#0046;URN&#0041;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;userData&#0032;&#0058;&#0061;&#0032;all&#0091;1&#0093;&#0046;&#0040;&#0042;string&#0041;&#0010;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;assert&#0046;Nilf&#0040;t&#0044;&#0032;userData&#0044;&#0032;&#0034;illegal&#0032;use&#0032;of&#0032;userData&#0032;on&#0032;server&#0032;&#0037;v&#0034;&#0044;&#0032;urn&#0041;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;wg&#0046;Done&#0040;&#0041;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;return&#0032;nil&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0125;&#0041;&#0010;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0047;&#0047;&#0032;Test&#0032;if&#0032;port&#0032;22&#0032;for&#0032;ssh&#0032;is&#0032;exposed&#0046;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;pulumi&#0046;All&#0040;infra&#0046;group&#0046;URN&#0040;&#0041;&#0044;&#0032;infra&#0046;group&#0046;Ingress&#0041;&#0046;ApplyT&#0040;func&#0040;all&#0032;&#0091;&#0093;interface&#0123;&#0125;&#0041;&#0032;error&#0032;&#0123;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;urn&#0032;&#0058;&#0061;&#0032;all&#0091;0&#0093;&#0046;&#0040;pulumi&#0046;URN&#0041;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;ingress&#0032;&#0058;&#0061;&#0032;all&#0091;1&#0093;&#0046;&#0040;&#0091;&#0093;ec2&#0046;SecurityGroupIngress&#0041;&#0010;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;for&#0032;&#0095;&#0044;&#0032;i&#0032;&#0058;&#0061;&#0032;range&#0032;ingress&#0032;&#0123;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;openToInternet&#0032;&#0058;&#0061;&#0032;false&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;for&#0032;&#0095;&#0044;&#0032;b&#0032;&#0058;&#0061;&#0032;range&#0032;i&#0046;CidrBlocks&#0032;&#0123;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;if&#0032;b&#0032;&#0061;&#0061;&#0032;&#0034;0&#0046;0&#0046;0&#0046;0&#0047;0&#0034;&#0032;&#0123;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;openToInternet&#0032;&#0061;&#0032;true&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;break&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0125;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0125;&#0010;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;assert&#0046;Falsef&#0040;t&#0044;&#0032;i&#0046;FromPort&#0032;&#0061;&#0061;&#0032;22&#0032;&#0038;&#0038;&#0032;openToInternet&#0044;&#0032;&#0034;illegal&#0032;SSH&#0032;port&#0032;22&#0032;open&#0032;to&#0032;the&#0032;Internet&#0032;&#0040;CIDR&#0032;0&#0046;0&#0046;0&#0046;0&#0047;0&#0041;&#0032;on&#0032;group&#0032;&#0037;v&#0034;&#0044;&#0032;urn&#0041;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0125;&#0010;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;wg&#0046;Done&#0040;&#0041;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;return&#0032;nil&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0125;&#0041;&#0010;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;wg&#0046;Wait&#0040;&#0041;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;return&#0032;nil&#0010;&#0032;&#0032;&#0032;&#0032;&#0125;&#0044;&#0032;pulumi&#0046;WithMocks&#0040;&#0034;project&#0034;&#0044;&#0032;&#0034;stack&#0034;&#0044;&#0032;mocks&#0040;0&#0041;&#0041;&#0041;&#0010;&#0032;&#0032;&#0032;&#0032;assert&#0046;NoError&#0040;t&#0044;&#0032;err&#0041;&#0010;&#0125;&#0010;&#0010;Unit&#0032;testing&#0032;with&#0032;Python&#0046;&#0010;import&#0032;unittest&#0010;import&#0032;pulumi&#0010;&#0010;class&#0032;MyMocks&#0040;pulumi&#0046;runtime&#0046;Mocks&#0041;&#0058;&#0010;&#0032;&#0032;&#0032;&#0032;def&#0032;new&#0095;resource&#0040;self&#0044;&#0032;type&#0095;&#0044;&#0032;name&#0044;&#0032;inputs&#0044;&#0032;provider&#0044;&#0032;id&#0095;&#0041;&#0058;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;return&#0032;&#0091;name&#0032;&#0043;&#0032;&#0039;&#0095;id&#0039;&#0044;&#0032;inputs&#0093;&#0010;&#0032;&#0032;&#0032;&#0032;def&#0032;call&#0040;self&#0044;&#0032;token&#0044;&#0032;args&#0044;&#0032;provider&#0041;&#0058;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;return&#0032;&#0123;&#0125;&#0010;&#0010;pulumi&#0046;runtime&#0046;set&#0095;mocks&#0040;MyMocks&#0040;&#0041;&#0041;&#0010;&#0010;&#0035;&#0032;Now&#0044;&#0032;import&#0032;the&#0032;code&#0032;that&#0032;creates&#0032;resources&#0032;and&#0032;then&#0032;test&#0032;it&#0046;&#0010;import&#0032;infra&#0010;&#0010;class&#0032;TestingWithMocks&#0040;unittest&#0046;TestCase&#0041;&#0058;&#0010;&#0032;&#0032;&#0032;&#0032;&#0035;&#0032;Test&#0032;if&#0032;the&#0032;service&#0032;has&#0032;tags&#0032;and&#0032;a&#0032;name&#0032;tag&#0046;&#0010;&#0032;&#0032;&#0032;&#0032;&#0064;pulumi&#0046;runtime&#0046;test&#0010;&#0032;&#0032;&#0032;&#0032;def&#0032;test&#0095;server&#0095;tags&#0040;self&#0041;&#0058;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;def&#0032;check&#0095;tags&#0040;args&#0041;&#0058;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;urn&#0044;&#0032;tags&#0032;&#0061;&#0032;args&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;self&#0046;assertIsNotNone&#0040;tags&#0044;&#0032;f&#0039;server&#0032;&#0123;urn&#0125;&#0032;must&#0032;have&#0032;tags&#0039;&#0041;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;self&#0046;assertIn&#0040;&#0039;Name&#0039;&#0044;&#0032;tags&#0044;&#0032;&#0039;server&#0032;&#0123;urn&#0125;&#0032;must&#0032;have&#0032;a&#0032;name&#0032;tag&#0039;&#0041;&#0010;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;return&#0032;pulumi&#0046;Output&#0046;all&#0040;infra&#0046;server&#0046;urn&#0044;&#0032;infra&#0046;server&#0046;tags&#0041;&#0046;apply&#0040;check&#0095;tags&#0041;&#0010;&#0010;&#0032;&#0032;&#0032;&#0032;&#0035;&#0032;Test&#0032;if&#0032;the&#0032;instance&#0032;is&#0032;configured&#0032;with&#0032;user&#0095;data&#0046;&#0010;&#0032;&#0032;&#0032;&#0032;&#0064;pulumi&#0046;runtime&#0046;test&#0010;&#0032;&#0032;&#0032;&#0032;def&#0032;test&#0095;server&#0095;userdata&#0040;self&#0041;&#0058;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;def&#0032;check&#0095;user&#0095;data&#0040;args&#0041;&#0058;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;urn&#0044;&#0032;user&#0095;data&#0032;&#0061;&#0032;args&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;self&#0046;assertFalse&#0040;user&#0095;data&#0044;&#0032;f&#0039;illegal&#0032;use&#0032;of&#0032;user&#0095;data&#0032;on&#0032;server&#0032;&#0123;urn&#0125;&#0039;&#0041;&#0010;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;return&#0032;pulumi&#0046;Output&#0046;all&#0040;infra&#0046;server&#0046;urn&#0044;&#0032;infra&#0046;server&#0046;user&#0095;data&#0041;&#0046;apply&#0040;check&#0095;user&#0095;data&#0041;&#0010;&#0010;&#0032;&#0032;&#0032;&#0032;&#0035;&#0032;Test&#0032;if&#0032;port&#0032;22&#0032;for&#0032;ssh&#0032;is&#0032;exposed&#0046;&#0010;&#0032;&#0032;&#0032;&#0032;&#0064;pulumi&#0046;runtime&#0046;test&#0010;&#0032;&#0032;&#0032;&#0032;def&#0032;test&#0095;security&#0095;group&#0095;rules&#0040;self&#0041;&#0058;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;def&#0032;check&#0095;security&#0095;group&#0095;rules&#0040;args&#0041;&#0058;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;urn&#0044;&#0032;ingress&#0032;&#0061;&#0032;args&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;ssh&#0095;open&#0032;&#0061;&#0032;any&#0040;&#0091;rule&#0091;&#0039;from&#0095;port&#0039;&#0093;&#0032;&#0061;&#0061;&#0032;22&#0032;and&#0032;any&#0040;&#0091;block&#0032;&#0061;&#0061;&#0032;&#0034;0&#0046;0&#0046;0&#0046;0&#0047;0&#0034;&#0032;for&#0032;block&#0032;in&#0032;rule&#0091;&#0039;cidr&#0095;blocks&#0039;&#0093;&#0093;&#0041;&#0032;for&#0032;rule&#0032;in&#0032;ingress&#0093;&#0041;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;self&#0046;assertFalse&#0040;ssh&#0095;open&#0044;&#0032;f&#0039;security&#0032;group&#0032;&#0123;urn&#0125;&#0032;exposes&#0032;port&#0032;22&#0032;to&#0032;the&#0032;Internet&#0032;&#0040;CIDR&#0032;0&#0046;0&#0046;0&#0046;0&#0047;0&#0041;&#0039;&#0041;&#0010;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0035;&#0032;Return&#0032;the&#0032;results&#0032;of&#0032;the&#0032;unit&#0032;tests&#0046;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;return&#0032;pulumi&#0046;Output&#0046;all&#0040;infra&#0046;group&#0046;urn&#0044;&#0032;infra&#0046;group&#0046;ingress&#0041;&#0046;apply&#0040;check&#0095;security&#0095;group&#0095;rules&#0041;&#0010;&#0010;Using&#0032;testing&#0032;frames&#0032;that&#0032;we&#0032;are&#0032;already&#0032;a&#0045;custom&#0032;to&#0032;can&#0032;benefit&#0032;since&#0032;these&#0032;tests&#0032;can&#0032;be&#0032;highly&#0032;customizable&#0046;&#0010;Integration&#0032;Testing&#0046;&#0010;Using&#0032;integration&#0032;testing&#0044;&#0032;we&#0032;can&#0032;look&#0032;at&#0032;testing&#0032;from&#0032;a&#0032;different&#0032;standpoint&#0032;since&#0032;we&#0032;are&#0032;testing&#0032;against&#0032;live&#0032;natural&#0032;resources&#0032;to&#0032;test&#0032;their&#0032;actual&#0032;behavior&#0046;&#0010;An&#0032;integration&#0032;test&#0032;invokes&#0032;the&#0032;Pulumi&#0032;command&#0045;line&#0032;interface&#0032;&#0040;CLI&#0041;&#0032;to&#0032;deploy&#0032;infrastructure&#0032;to&#0032;an&#0032;ephemeral&#0032;environment&#0046;&#0010;A&#0032;good&#0032;part&#0032;about&#0032;integration&#0032;testing&#0032;is&#0032;that&#0032;we&#0032;are&#0032;testing&#0032;on&#0032;natural&#0032;resources&#0032;in&#0032;our&#0032;cloud&#0032;infrastructures&#0046;&#0032;Since&#0032;we&#0032;are&#0032;trying&#0032;on&#0032;actual&#0032;resources&#0044;&#0032;these&#0032;tests&#0032;can&#0032;take&#0032;longer&#0032;than&#0032;unit&#0032;testing&#0046;&#0010;Benefits&#0032;of&#0032;running&#0032;integration&#0032;tests&#0058;&#0010;Projects&#0032;code&#0032;is&#0032;syntactically&#0032;formed&#0032;and&#0032;runs&#0032;without&#0032;errors&#0046;&#0010;Stacks&#0032;configuration&#0032;and&#0032;secrets&#0032;work&#0032;and&#0032;are&#0032;interpreted&#0032;correctly&#0046;&#0010;Your&#0032;project&#0032;can&#0032;be&#0032;successfully&#0032;deployed&#0032;to&#0032;your&#0032;cloud&#0032;provider&#0032;of&#0032;choice&#0046;&#0010;Integration&#0032;testing&#0032;with&#0032;Go&#0046;&#0010;package&#0032;test&#0010;&#0010;import&#0032;&#0040;&#0010;&#0032;&#0032;&#0032;&#0032;&#0034;os&#0034;&#0010;&#0032;&#0032;&#0032;&#0032;&#0034;path&#0034;&#0010;&#0032;&#0032;&#0032;&#0032;&#0034;testing&#0034;&#0010;&#0010;&#0032;&#0032;&#0032;&#0032;&#0034;github&#0046;com&#0047;pulumi&#0047;pulumi&#0047;pkg&#0047;v2&#0047;testing&#0047;integration&#0034;&#0010;&#0041;&#0010;&#0010;func&#0032;TestExamples&#0040;t&#0032;&#0042;testing&#0046;T&#0041;&#0032;&#0123;&#0010;&#0032;&#0032;&#0032;&#0032;awsRegion&#0032;&#0058;&#0061;&#0032;os&#0046;Getenv&#0040;&#0034;AWS&#0095;REGION&#0034;&#0041;&#0010;&#0032;&#0032;&#0032;&#0032;if&#0032;awsRegion&#0032;&#0061;&#0061;&#0032;&#0034;&#0034;&#0032;&#0123;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;awsRegion&#0032;&#0061;&#0032;&#0034;us&#0045;west&#0045;1&#0034;&#0010;&#0032;&#0032;&#0032;&#0032;&#0125;&#0010;&#0032;&#0032;&#0032;&#0032;cwd&#0044;&#0032;&#0095;&#0032;&#0058;&#0061;&#0032;os&#0046;Getwd&#0040;&#0041;&#0010;&#0032;&#0032;&#0032;&#0032;integration&#0046;ProgramTest&#0040;t&#0044;&#0032;&#0038;integration&#0046;ProgramTestOptions&#0123;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;Quick&#0058;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;true&#0044;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;SkipRefresh&#0058;&#0032;true&#0044;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;Dir&#0058;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;path&#0046;Join&#0040;cwd&#0044;&#0032;&#0034;&#0046;&#0046;&#0034;&#0044;&#0032;&#0034;&#0046;&#0046;&#0034;&#0044;&#0032;&#0034;aws&#0045;js&#0045;s3&#0045;folder&#0034;&#0041;&#0044;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;Config&#0058;&#0032;map&#0091;string&#0093;string&#0123;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0034;aws&#0058;region&#0034;&#0058;&#0032;awsRegion&#0044;&#0010;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0032;&#0125;&#0044;&#0010;&#0032;&#0032;&#0032;&#0032;&#0125;&#0041;&#0010;&#0125;&#0010;&#0010;Why&#0032;should&#0032;we&#0032;use&#0032;test&#0032;with&#0032;our&#0032;Pulumi&#0032;code&#0063;&#0010;Unit&#0032;tests&#0032;are&#0032;ideal&#0032;for&#0032;validating&#0032;inputs&#0032;and&#0032;ensuring&#0032;that&#0032;cloud&#0032;resources&#0032;are&#0032;created&#0046;&#0032;We&#0032;can&#0032;use&#0032;mocks&#0032;to&#0032;test&#0032;if&#0032;the&#0032;webserver&#0032;has&#0032;a&#0032;name&#0032;tag&#0046;&#0032;First&#0044;&#0032;well&#0032;make&#0032;the&#0032;mocks&#0032;and&#0032;import&#0032;the&#0032;infrastructure&#0032;that&#0032;uses&#0032;the&#0032;mocks&#0046;&#0032;Integration&#0032;testing&#0032;requires&#0032;deploying&#0032;resources&#0032;in&#0032;either&#0032;a&#0032;test&#0032;environment&#0032;or&#0032;an&#0032;ephemeral&#0032;environment&#0046;&#0010;Resources&#0010;Testing&#0032;&#0124;&#0032;Pululmi&#0010;Are&#0032;you&#0032;about&#0032;to&#0032;break&#0032;Prod&#0063;&#0010;Integration&#0032;Testing&#0032;&#0124;&#0032;Pulumi&#0032;&#0010;Infrastructure&#0032;Testing&#0032;in&#0032;Practice&#0032;&#0010;Testing&#0032;Practices&#0032;for&#0032;Cloud&#0032;Engineering&#0010;Integration&#0032;test&#0032;with&#0032;Pulumi&#0032;and&#0032;Azure&#0032;Kubernetes&#0032;Service&#0010;As&#0032;always&#0044;&#0032;happy&#0032;coding&#0044;&#0032;my&#0032;friends&#0033;&#0032;ðŸ˜Š</div>
          <div class="date">5&#0047;23&#0047;22</div>
          <div class="data">
            <span class="author">Jordan&#0032;Taylor</span> 
          </div>
        </div>
      </div>
    </foreignObject>
  </g>
</svg>